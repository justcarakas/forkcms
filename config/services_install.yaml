parameters:
  doctrine.dbal.connection_factory.class: ForkCMS\Bundle\InstallerBundle\Service\InstallerConnectionFactory
  fork.is_installed: false
  fork.form.theme: '@@ForkCMSInstaller/form_theme.html.twig'

services:
  # default configuration for services in *this* file
  _defaults:
    autowire: true      # Automatically injects dependencies in your services.
    autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.
    bind:
      string $rootDir: '%kernel.project_dir%'
      Traversable $availableModules: !tagged_iterator { tag: 'forkcms.module.installer' }

  _instanceof:
    ForkCMS\Core\Domain\MessageHandler\InstallerHandlerInterface:
      tags:
        - { name: messenger.message_handler, bus: installer.bus }

  ForkCMS\Core\Installer\:
    resource: '../src/Core/Installer/*'
    exclude:
      '../src/Core/Installer/Console'
      '../src/Core/Installer/Controller'
      '../src/Core/Installer/Domain/Installer/InstallerConnectionFactory.php'

  ForkCMS\Core\Installer\Controller\:
    resource: '../src/Core/Installer/Controller/*'
    public: true
